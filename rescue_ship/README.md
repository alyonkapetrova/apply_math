# Спасательный челнок

Первая задача в репозитории - слегка переделанная [Wild Dogs](https://py.checkio.org/en/mission/wild-dogs/) из Checkio. Стрелять по собакам в оригинальном решении такая себе затея, поэтому поменяла описание на классическую фантастику.

В решении используется чистый питон (версии 3.7) без дополнительных библиотек и хитростей. Как и в будущих задачах, стараюсь держать код чистым, писать простым языком и подробно показывать ход решения.

## Задача

![dse githubtasks cover rescueship](https://github.com/alyonkapetrova/apply_math/blob/master/wild_dogs/media/dse_githubtasks_cover_rescueship.svg)

Десант на Кантиту VI провален. Имперский гарнизон встретил нас во всеоружии. Одна половина десанта погибла ещё не ступив на поверхность, другая раскидана по всему спутнику. Наши ребята разделены и окружены.

Мы отступаем и забираем солдат. Спасательный челнок захватит оставшиеся отряды, его не засекут радары противника. **Сигнальные маячки** оставшихся отрядов передают своё местоположение в зашифрованном виде. Все маячки висят на одной высоте и орбите, они располагаются **на одной плоскости**.

Челнок может расшифровать их и спасти солдат, выстрелив по маячкам лазерным **лучом**. Но энергии хватит только на **один выстрел** и один полёт.

Корабль должен выйти на исходную позицию для прямого выстрела. Не мешкайте: навигатор ждёт от вас работающий алгоритм. На кону жизни наших людей!

- **Постройте уравнение прямой** - выстрел спасательного челнока лазерным лучом.
  > Челнок стреляет в обе стороны (по направлению и в обратном направлении). Поэтому выстрел корабля - прямая, а не "лазерный луч".

- Прямая должна **проходить через координаты** сигнальных маяков. Чем больше маяков зацепит выстрел челнока, тем лучше.

- **Посчитайте расстояние** от текущего положения челнока до позиции выстрела.

## I/O

### Input / Дано:

- Данные по сигнальным маякам:
<br/>**Количество маяков:** 10;
<br/>**Координаты маяков:** (x,y).

- Исходная позиция спасательного челнока:
<br/>**Координаты:** (0,0).

### Output / Найти:

- Кратчайшее расстояние до прямой
<br/>**Тип данных:** float.

## Подготовка

Для решения задачи нам нужно знать:

Что такое [прямая и как её задать](https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D1%8F%D0%BC%D0%B0%D1%8F).

Как рассчитать [расстояние от точки до прямой на плоскости](https://ru.wikipedia.org/wiki/%D0%A0%D0%B0%D1%81%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D0%B5_%D0%BE%D1%82_%D1%82%D0%BE%D1%87%D0%BA%D0%B8_%D0%B4%D0%BE_%D0%BF%D1%80%D1%8F%D0%BC%D0%BE%D0%B9_%D0%BD%D0%B0_%D0%BF%D0%BB%D0%BE%D1%81%D0%BA%D0%BE%D1%81%D1%82%D0%B8).

## Решение

![dse githubtasks rescueship coord 01b](https://github.com/alyonkapetrova/apply_math/blob/master/wild_dogs/media/dse_githubtasks_rescueship_coord_01b.svg)

> В качестве примера используем координаты четырёх маяков: (2,6), (5,2), (8,-2), (10,4)

__1. Прокладываем прямую__

Выберем __пару несовпадающих точек__ (координат маяков), чтобы проложить через них прямую.
```
>>> point_1 = (2,6)
>>> point_2 = (5,2)
```
Вспомним уравнение прямой, проходящей через две несовпадающие точки

![line equation formula](https://github.com/alyonkapetrova/apply_math/blob/master/wild_dogs/media/line_equation.svg).

Отлично! Приведём её к общему виду ![line equation normal view letters formula](https://github.com/alyonkapetrova/apply_math/blob/master/wild_dogs/media/line_equation_normal_view_letters.svg). Теперь нам проще выразить __коэффициэнты a, b__ и __c__, они понадобятся нам на следующем шаге.

Получается так: ![line equation normal view formula](https://github.com/alyonkapetrova/apply_math/blob/master/wild_dogs/media/line_equation_normal_view.svg).
```
>>> a = point_1[1] - point_2[1]
>>> b = point_2[0] - point_1[0]
>>> c = point_1[0] * point_2[1] - point_2[0] * point_1[1]
a = 4
b = 3
c = -26
```
![dse githubtasks rescueship coord 03b](https://github.com/alyonkapetrova/apply_math/blob/master/wild_dogs/media/dse_githubtasks_rescueship_coord_03b.svg)

__2. Вычисляем дистанцию__

У нас есть прямая и коэффициенты a, b и c. Нужно рассчитать расстояние до прямой от исходного положения спасательного челнока. Сделаем это с помощью формулы расстояния от точки до прямой на плоскости. Начальное положение челнока задано координатой (0,0), поэтому формула примет вид:

![point to line distance formula](https://github.com/alyonkapetrova/apply_math/blob/master/wild_dogs/media/point_to_line_distance.svg)

Полученное значение округлим.
```
>>> distance = round((abs(c) / sqrt(a ** 2 + b ** 2)), 2)
5.2
```

![dse githubtasks rescueship coord 04b](https://github.com/alyonkapetrova/apply_math/blob/master/wild_dogs/media/dse_githubtasks_rescueship_coord_04b.svg)

__3. Подсчёт количества маяков__

Теперь нужно выяснить, сколько точек (маяков) пересекает прямая. Проверим координаты маяков. Подставим их в уравнение прямой ![line equation normal view letters formula](https://github.com/alyonkapetrova/apply_math/blob/master/wild_dogs/media/line_equation_normal_view_letters.svg). В качестве коэффициентов a, b и c используем значания, полученные на шаге 1. Лежащие на прямой точки прибавим к счётчику count.
```
>>> count = sum(1 for point in coords if a * point[0] + b * point[1] + c == 0)
3
```

__4. Запись полученных данных__

Подготовим два списка. В первый (distance_list) запишем пару значений: _количество маяков на прямой / дистанция от точки (0,0) до прямой_. Во второй (count_list) добавляем количество маяков на каждой прямой.
```
>>> distance_list = []
>>> count_list = []
---
>>> distance_list.append([count, distance])
>>> count_list.append(count)
[[3, 5.2]]
[3]
```
> Выполняем шаги с первого по четвёртый в цикле и проверяем все возможные варианты прямых.
![dse githubtasks rescueship coord 02b](https://github.com/alyonkapetrova/apply_math/blob/master/wild_dogs/media/dse_githubtasks_rescueship_coord_02b.svg)

__5. Поиск максимальных значений__

Пора провести анализ собранной информации о маяках, чтобы сделать решающий выбор. В новый список (answer) запишем только те пары из списка distance_list, в которых количество маяков на прямой равно максимальному элементу из списка count_list. Отсортируем список.
```
>>> distance_list = [[3, 5.2], [3, 5.2], [2, 6.31], [3, 5.2], [3, 5.2], [2, 0.0], [3, 5.2], [3, 5.2], [2, 8.22], [2, 6.31], [2, 0.0], [2, 8.22]]
>>> count_list = [3, 3, 2, 3, 3, 2, 3, 3, 2, 2, 2, 2]
>>> answer = sorted([i for i in distance_list if i[0] == max(count_list)])
[[3, 5.2], [3, 5.2], [3, 5.2], [3, 5.2], [3, 5.2], [3, 5.2]]
```
Так как значения количества маяков будут одинаковыми, список отсортируется по значениям дистанции до прямой в порядке возрастания.

__6. Определение минимальной дистанции__

Нам необходима ближайшая прямая, которая затронет максимальное количество маяков на орбите. Список answer отсортирован по возрастанию, а значит минимальная дистанция до нужной прямой храниться в первой паре списка.
```
>>> answer = [[3, 5.2], [3, 5.2], [3, 5.2], [3, 5.2], [3, 5.2], [3, 5.2]]
>>> return answer[0][1]
5.2
```
Сообщим навигатору значение второго элемента первой пары списка answer, и да поможет нам Бог, товарищи! Огонь!


## Что дальше?

Часть описания задачи с неясными целями. Может впихнуть сюда ссылки на похожие задачи, или что-то по теме, что не вошло в предыдущие разделы.
