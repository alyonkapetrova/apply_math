# Лесозаготовки

Хочется решать практические задачи здесь и сейчас, без выдуманных условий и фантастики. Поэтому будем пилить брёвна и готовить лес на продажу. Напишем программу для лесопилки - оптимизируем расходы малого бизнеса во славу рынка.

Исходный код - чистый python (версии 3.7) без примесей и библиотек. Оригинальную задачу и решение можно найти в книжке И.Н. Сергеева, С.Н. Олехника и С.Б. Гашкова "Примени математику" (ISBN 5-02-013946-7) 1989 года.
> Параграф 19 "Маленькие хитрости", задача 19.7 "Заготовка дров", с. 203

## Задача

![dse githubtasks cover forestry](https://github.com/alyonkapetrova/apply_math/blob/master/forestry/media/dse_githubtasks_cover_forestry.svg)

Торговая федерация расширяет сферы влияния вглубь Кандийских лесов. С открытием границ, падкие на наживу предприниматели ринулись рубить ценный Кандийский кедр. Разработка ведётся быстро, неаккуратно и грубо. Вырубленный в спешке кедр сильно теряет в качестве - его сложно продать и получить выгоду.

Вы же, поднакопив капитал и всё разузнав, запустили лесопилку на границе. Лесопилка проверяет привезённый лес от поставщиков, распиливает на готовые брёвна и продаёт. Но плохие брёвна не идут на продажу, а как **отличать качественный лес** от некачественного вы не знаете.

Для оптимизации производства нужна программа, **алгоритм** проверки хороших и плохих брёвен. Плохие брёвна - с сучками, зазорами, гнилыми местами - не идут на продажу и не приносят выгоды. Лесопилка не должна тратить время на распил и подготовку некачественного леса.

- **Проверьте привезённый лес** - алгоритм должен учитывать сколько леса приехало, какой длины каждое бревно и есть ли плохие участки в каждом бревне.

- **Посчитайте доход** лесопилки. Каждое готовое бревно приносит деньги компании. Каждый распил стоит денег для лесопилки.

- К вам приезжает несколько поставщиков с разным лесом, но одновременно лесопилка может работать только с одним из них. **Выберите наиболее выгодный вариант**.

## I/O

### Input / Дано:

- Параметры грузовиков с лесом
<br/>**Вместимость:** int;
<br/>**Максимальная длина бревна:** int.

- Стоимость работ
<br/>**Расходы на распил:** 50;
<br/>**Доход с готового бревна:** 200.

### Output / Найти:

- Прибыль от каждого грузовика
<br/>**Тип данных:** int.

- Самый выгодный для лесопилки грузовик
<br/>**Тип данных:** string.

## Подготовка

Если вы знаете, как устроены алгоритмы, то сможете разобраться с этой задачей.

## Решение

> Для примера используем входные данные:
  - объём машин - 28
  - максимальная длина бревна - 5

__1. Генерируем лес__

Прежде чем выбирать самое выгодное предложение от поставщиков леса, узнаем, что лежит в их грузовиках.

У каждого грузовика есть два критерия - __объём грузовика__ (количество погонных метров леса) и __максимальная длина ствола__.
Объём кузова так же примем за начальное значение вспомогательной переменной sum_truck.
```
>>> capacity = 28
>>> max_len = 5

>>> sum_truck = 28
```
Бревно будем представлять в виде списка из нулей и единиц, где 0 - непригодный для продажи метр дерева (сучковатый или треснутый), а 1 - целый, неповреждённый метр, который можно продать. Минимальная длина ствола - 2 метра, максимальная равна значению переменной max_len.

Для генерации бревна используем функцию _randint_ из модуля _random_.
```
>>> trunk = [randint(0,1) for i in range(randint(2, max_len))]
[1, 0]
```
Каждое новое бревно добавляем в грузовик и отнимаем его длину от переменной sum_truck.
```
>>> truck.append(trunk)
>>> sum_truck -= len(trunk)
[[1, 0]]
26
```
Брёвна генерируются в цикле, пока переменная sum_truck остаётся больше максимальной длины бревна (max_len).

После завершения цикла нужно сгенерировать последнее бревно. Его длина будет равна значению sum_truck.
```
>>> truck.append([randint(0,1) for i in range(sum_truck)])
[[1, 0], [1, 1, 1, 1, 0], [0, 1, 1], [0, 1, 0, 0], [0, 0, 1, 1, 1], [0, 0, 1, 0, 0], [1, 1, 0, 0]]
```
Грузовик готов!

<img width="60%" alt="dse_githubtasks_forestry_sawmill_01a" src="https://github.com/alyonkapetrova/apply_math/blob/master/forestry/media/dse_githubtasks_forestry_sawmill_01a.svg">

__2. Пилим брёвна - считаем прибыль__

Теперь самое инересное - сколько лесопилка заработает на каждом грузовике?

Для подсчёта затрат на распил брёвен и конечной прибыли будем рассматривать каждый ствол отдельно.

Так как продать можно только качественный и не повреждённый распил, нас будут интересовать только элементы списка, которые равны 1.

<img width="60%" alt="dse_githubtasks_forestry_sawmill_01b" src="https://github.com/alyonkapetrova/apply_math/blob/master/forestry/media/dse_githubtasks_forestry_sawmill_01b.svg">

<img width="60%" alt="dse_githubtasks_forestry_sawmill_02a" src="https://github.com/alyonkapetrova/apply_math/blob/master/forestry/media/dse_githubtasks_forestry_sawmill_02a.svg">

Каждый качественный метр бревна можно продать за __200 кредитов__! Богато! А вот единичный распил стоит лесопилке __50 кредитов__. Для избежания лишних расходов, некачественные метры брёвен не распиливаются.

> Так, если в бревне будет три повреждённых метра и только один качественный, распил будет только один, вместо трёх.

<img width="60%" alt="dse_githubtasks_forestry_sawmill_02b" src="https://github.com/alyonkapetrova/apply_math/blob/master/forestry/media/dse_githubtasks_forestry_sawmill_02b.svg">

Есть три особых условия распила стволов:

- если последний и предпоследний метры бревна равны 1, то поледний метр обошёлся лесопилке бесплатно
```
>>> if i == len(trunk) - 1 and trunk[i - 1] == 1:
>>>       profit += 200
```
- первый и последний распилы идут по стандартной цене
```
>>> elif i == 0 or i == len(trunk) - 1:
>>>       cut += 50
>>>       profit += 200
```
- если качественный метр бревна расположен справа или между двумя бракованными метрами, распил будет стоить __100 кредитов__
```
>>> elif trunk[i - 1] == 0 and trunk[i + 1] == 0 or trunk[i - 1] == 0 and trunk[i + 1] == 1:
>>>       cut += 100
>>>       profit += 200
```

<img width="60%" alt="dse_githubtasks_forestry_sawmill_02c" src="https://github.com/alyonkapetrova/apply_math/blob/master/forestry/media/dse_githubtasks_forestry_sawmill_02c.svg">

<img width="60%" alt="dse_githubtasks_forestry_sawmill_03a" src="https://github.com/alyonkapetrova/apply_math/blob/master/forestry/media/dse_githubtasks_forestry_sawmill_03a.svg">

__3. Определяем самый выгодный грузовик__

> добавить вывод функции

Теперь легко можно выбрать подходящего поставщика ценнейшего канадского кедра!

Ни дня без прибыли!
