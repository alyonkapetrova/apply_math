# Лесозаготовки

Хочется решать практические задачи здесь и сейчас, без выдуманных условий и фантастики. Поэтому, в этой задаче, будем пилить брёвна и готовить лес на продажу. Напишем программу для лесопилки - оптимизируем расходы малого бизнеса.

Исходный код - чистый python (версия 3.7) без примесей, с подключением библиотеки random. Оригинальную задачу и решение можно найти в книжке И.Н. Сергеева, С.Н. Олехника и С.Б. Гашкова "Примени математику" (ISBN 5-02-013946-7) 1989 года.
> Параграф 19 "Маленькие хитрости", задача 19.7 "Заготовка дров", с. 203

## Задача

![dse githubtasks cover forestry](https://github.com/alyonkapetrova/apply_math/blob/master/forestry/media/dse_githubtasks_cover_forestry.svg)

Торговая федерация расширяет сферы влияния вглубь Кандийских лесов. С открытием границ, падкие на наживу предприниматели ринулись рубить ценный **Кандийский кедр**. Разработка ведётся быстро, неаккуратно и грубо. Вырубленный в спешке кедр сильно теряет в качестве - его сложно продать и получить выгоду.

Вы же, поднакопив капитал и всё разузнав, запустили лесопилку на границе. Лесопилка проверяет привезённый лес от поставщиков, распиливает на готовые брёвна и продаёт. Но плохие брёвна не идут на продажу, а как **отличать качественный лес** от некачественного вы не знаете.

Для оптимизации производства нужна программа, **алгоритм** проверки хороших и плохих брёвен. Плохие брёвна - с сучками, зазорами, гнилыми местами - не идут на продажу и не приносят выгоды. Лесопилка не должна тратить время на распил и подготовку некачественного леса.

- **Проверьте привезённый лес** - алгоритм должен учитывать сколько леса приехало, какой длины каждое бревно и есть ли плохие участки в каждом бревне.

- **Посчитайте доход** лесопилки. Каждое готовое бревно приносит деньги компании. Каждый распил стоит денег для лесопилки.

- К вам приезжает несколько поставщиков с разным лесом, но одновременно лесопилка может работать только с одним из них. **Выберите наиболее выгодный вариант**.

## I/O

### Input / Дано:

- Параметры грузовиков с лесом
<br/>**Вместимость:** int;
<br/>**Максимальная длина бревна:** int.

- Стоимость работ
<br/>**Расходы на распил:** 50;
<br/>**Доход с готового бревна:** 200.

### Output / Найти:

- Прибыль от каждого грузовика
<br/>**Тип данных:** int.

- Самый выгодный для лесопилки грузовик
<br/>**Тип данных:** string.

## Подготовка

Базовых знаний по теории алгоритмов будет достаточно, чтобы справиться с этой задачей.

Посмотреть как устроена библиотека random и что она умеет можно [здесь](ссылка).

## Решение

> Для примера используем входные данные:
> - вместимость грузовика - 28;
> - максимальная длина бревна - 5.

__1. Генерируем лес__

Для начала узнаем, какой лес лежит в грузовиках от поставщиков.

У каждого грузовика есть два параметра - __вместимость__ (количество единиц - погонных метров леса) и __максимальная длина ствола__.

Присвоим переменной sum_truck значение вместимости грузовика - 28 единиц.

```
>>> capacity = 28
>>> max_len = 5

>>> sum_truck = 28
```

Будем рассматривать бревно в виде списка из нулей и единиц, где 0 - непригодный для продажи метр дерева (с сучками или трещинами), а 1 - качественный, подходящий к продаже метр.

Минимальная длина бревна - 2 метра. Максимальная длина равна пяти метрам и записана в переменную max_len.

Для генерации бревна используем функцию __randint__ из модуля random.

```
>>> trunk = [randint(0,1) for i in range(randint(2, max_len))]
[1, 0]
```
Каждое бревно добавляем в грузовик и отнимаем его длину от переменной sum_truck.
```
>>> truck.append(trunk)
>>> sum_truck -= len(trunk)
[[1, 0]]
26
```

Брёвна генерируются в цикле, пока переменная sum_truck больше максимальной длины бревна (max_len). Последнее бревно в грузовике генерируем после завершения цикла. Длина бревна равна значению переменной sum_truck.

```
>>> truck.append([randint(0,1) for i in range(sum_truck)])
[[1, 0], [1, 1, 1, 1, 0], [0, 1, 1], [0, 1, 0, 0], [0, 0, 1, 1, 1], [0, 0, 1, 0, 0], [1, 1, 0, 0]]
```
Грузовик готов!

<img width="60%" alt="dse_githubtasks_forestry_sawmill_01a" src="https://github.com/alyonkapetrova/apply_math/blob/master/forestry/media/dse_githubtasks_forestry_sawmill_01a.svg">

__2. Пилим брёвна - считаем прибыль__

Сколько лесопилка заработает на каждом грузовике? Рассмотрим каждое бревно отдельно, подсчитаем затраты на его распил и выгоду от продажи.

Нас интересуют элементы списка равные 1, ведь продать можно только качественный и неповреждённый погонный метр.

<img width="60%" alt="dse_githubtasks_forestry_sawmill_01b" src="https://github.com/alyonkapetrova/apply_math/blob/master/forestry/media/dse_githubtasks_forestry_sawmill_01b.svg">

<img width="60%" alt="dse_githubtasks_forestry_sawmill_02a" src="https://github.com/alyonkapetrova/apply_math/blob/master/forestry/media/dse_githubtasks_forestry_sawmill_02a.svg">

Качественный метр бревна стоит __200 кредитов__ (profit). Богато! Единичный распил обойдётся лесопилке в __50 кредитов__ (cut). Ради экономии и оптимизации производства, мы не будем распиливать повреждённые метры брёвен.

> Для бревна с тремя повреждёнными метрами и одним качественным [0, 0, 0, 1] будет сделан только один распил.

<img width="60%" alt="dse_githubtasks_forestry_sawmill_02b" src="https://github.com/alyonkapetrova/apply_math/blob/master/forestry/media/dse_githubtasks_forestry_sawmill_02b.svg">

Есть три особых условия распила стволов:

- Если последний и предпоследний метры бревна равны 1, то последний метр обойдётся лесопилке бесплатно:
```
>>> if i == len(trunk) - 1 and trunk[i - 1] == 1:
>>>       profit += 200
```
- Первый и последний распилы идут по стандартной цене:
```
>>> elif i == 0 or i == len(trunk) - 1:
>>>       cut += 50
>>>       profit += 200
```
- Если качественный метр бревна расположен справа или между двумя бракованными метрами, распил будет стоить __100 кредитов__:
```
>>> elif trunk[i - 1] == 0 and trunk[i + 1] == 0 or trunk[i - 1] == 0 and trunk[i + 1] == 1:
>>>       cut += 100
>>>       profit += 200
```

<img width="60%" alt="dse_githubtasks_forestry_sawmill_02c" src="https://github.com/alyonkapetrova/apply_math/blob/master/forestry/media/dse_githubtasks_forestry_sawmill_02c.svg">

<img width="60%" alt="dse_githubtasks_forestry_sawmill_03a" src="https://github.com/alyonkapetrova/apply_math/blob/master/forestry/media/dse_githubtasks_forestry_sawmill_03a.svg">

Попилено.

__3. Определяем самый выгодный грузовик__

С готовыми расчётами, осталось подсчитать прибыль. Из стоимости каждого проданного метра вычтем затраты на распил.
```
>>> cut = 800
>>> profit = 2800
>>> total = profit - cut
2000
```
Теперь можно выбрать подходящего поставщика ценнейшего Кандийского кедра. Ни дня без прибыли!
